@model TaskDto

<div class="card task-card mb-2 shadow-sm" data-task-id="@Model.Id" draggable="true">
    <div class="card-body p-3">
        <div class="d-flex justify-content-between align-items-start">
            <div class="flex-grow-1">
                <h6 class="card-title mb-1">
                    <a href="@Url.Action("Details", "Tasks", new { id = Model.Id })" 
                       class="text-decoration-none text-dark">
                        @Model.Title
                    </a>
                </h6>

                @if (!string.IsNullOrEmpty(Model.Description))
                {
                    <p class="card-text text-muted small mb-2">
                        @{
                            var desc = Model.Description;
                            if (desc.Length > 50)
                                desc = desc.Substring(0, 50) + "...";
                        }
                        @desc
                    </p>
                }
            </div>
        </div>

        <div class="task-metadata mt-2">
            <!-- Status Badge -->
            @{
                var statusColor = Model.Status switch
                {
                    "ToDo" => "secondary",
                    "InProgress" => "info",
                    "InReview" => "warning",
                    "Done" => "success",
                    _ => "secondary"
                };
            }
            <span class="badge bg-@statusColor me-1">@Model.Status</span>

            <!-- Priority Badge -->
            @{
                var priorityColor = Model.Priority switch
                {
                    "Urgent" => "danger",
                    "High" => "warning",
                    "Normal" => "info",
                    "Low" => "success",
                    _ => "secondary"
                };
            }
            <span class="badge bg-@priorityColor">@Model.Priority</span>

            <!-- Due Date -->
            @if (Model.DueDate.HasValue)
            {
                <small class="d-block text-muted mt-2">
                    Due: @Model.DueDate.Value.ToString("MMM dd, yyyy")
                </small>
            }
        </div>
    </div>
</div>

<style>
    .task-card {
        cursor: grab;
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .task-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.1) !important;
    }

    .task-card.dragging {
        opacity: 0.5;
        cursor: grabbing;
    }
</style>
